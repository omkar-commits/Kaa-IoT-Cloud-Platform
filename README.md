# Kaa-IoT-Cloud-Platform
Aimis to learn some of the fundamentals of the Kaa platform and discover how to:

1. create a digital twin of your IoT device
2. connect a client
3. submit and fetch some device attributes
4. view the digital twin of your device and its attributes in the Kaa UI

Let’s start by defining some of the essential Kaa terms. They will help you get a good grasp of the Kaa design logic and provide for smooth transition into the Kaa documentation, tutorials, UI, and API.

1. Endpoint
Endpoint is a digital twin of something that you manage with the Kaa platform. A lot of data in Kaa is related to endpoints: attributes, telemetry data, configuration, etc. We often shorten “endpoint” to “EP”, so don’t get caught by surprise when you see something like “EP configuration” in the docs (you got it, documentation).

Most commonly, an endpoint represents some connected device: a weather station, camera, sub-gig RAN gateway, smart sock, or a submarine. However, after a lot of debate, we decided in favor of a more generic term “endpoint” instead of “device” (even though we knew it would be more confusing for the Kaa beginners). To understand why, let us consider some examples.

2. Endpoint ID
Endpoint ID is used to uniquely identify an endpoint within the Kaa platform. An endpoint ID is usually an immutable UUID that is automatically generated by the Kaa at the moment of creating a new endpoint.

All endpoint data, such as metadata attributes, collected time series data points, commands, etc., is associated with a specific endpoint ID. Whenever you retrieve or manage endpoint-related data in Kaa (mainly via REST API or NATS), you will see endpoint IDs.

3. Endpoint token
Endpoint tokens are used for endpoint identification when exchanging endpoint-related data with the Kaa platform using supported out-of-the-box protocols based on MQTT and HTTP. Endpoint tokens are unique within a single Kaa application and assigned to exactly one endpoint.

When a message from a connected client arrives to the Kaa platform, endpoint token is resolved into the corresponding endpoint ID. In the case of the Kaa Protocol over MQTT, the endpoint token goes inside of the MQTT topic (e.g. kp1/<appversion_name>/epmx/<endpoint_token>/get).

Typically, tokens are random strings automatically generated by Kaa (e.g. JTjdbENzHh), but you can also provision your own endpoint tokens (e.g. device serial number, MAC address, etc.).

Decoupling of endpoint tokens from endpoint IDs allows you to suspend, revoke, reactivate, and re-issue endpoint tokens without impacting the endpoint ID. To communicate with the Kaa platform, your devices or gateways do not need to know endpoint IDs, but only endpoint tokens.

4. Endpoint metadata
Endpoint metadata is a set of key-value attributes associated with an endpoint. It is represented in the platform as a JSON document of an arbitrary format.

Endpoint metadata typically includes some endpoint-related information, such as location, description, serial number, hardware version, etc. Metadata is stored in the Endpoint Register service and can be read or updated in two ways: either via the communication layer or via the EPR REST API. Certainly, you can also manage metadata using the Kaa Web Dashboard UI.

Applications and application versions
Let’s imagine for a moment that you have already implemented and successfully launched a line of smart IoT-powered fridges. The business is good; but now you figure it’s time to expand your product portfolio with connected coffee machines. But how do you distinguish between fridges and coffee machines in the platform?

5. Enter Kaa applications.

Applications in Kaa serve as containers for endpoints of different types. You can have a “Smart fridge” application that would contain all endpoints representing physical fridges, and a “Coffee machine” application for all, well, coffee machines. Kaa applications also house all the necessary system configuration for Kaa to know the capabilities of your connected devices and how to work with them. For example, coffee machines may have a setting for the brewing temperature. This configuration setting can be declared in the Kaa “Coffee machine” application, so that the platform understands it.

Now, back to our home appliances business. Let’s imagine that your new coffee machines sell exceptionally well but you keep hearing about this new feature that customers want. They want to wake up to the smell of freshly brewed coffee. To enable this, you implement a new feature in the app that allows users to schedule the time of auto-start. There is also an update to the coffee machines firmware and you start rolling it out. But how do you distinguish between machines that already have the new firmware and those which don’t?

6. Application versions to the rescue.

Each application in Kaa can have multiple versions at the same time. Each version represents a set of capabilities supported by endpoints. At any given moment each endpoint in Kaa is associated with one version of its application. The knowledge of the current application version of an endpoint helps Kaa understand what functionality the endpoint supports, how the data is formatted, etc. You can use versions to evolve your devices by adding or retiring features while keeping your old versions up and running.

Application version names are present in the default Kaa protocol to make the platform aware of the capabilities of the connected endpoint (e.g. kp1/<appversion_name>/epmx/<endpoint_token>/get topic over MQTT).

You may notice that we often shorten “application version” to “appversion”. That’s just a developer’s habit, we hope you don’t mind.

Now that we are done with the textbook part, let’s jump into action and do something fun.
